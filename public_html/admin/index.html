<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Ethics Framework - Admin Dashboard</title>
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="header">
            <div>
                <h1>🤖 AI Ethics Framework</h1>
                <p>Advanced LLM Bias Detection & Management</p>
            </div>
            <div class="status-badge" id="systemStatus">System Operational</div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">📊 Dashboard</button>
            <button class="nav-tab" onclick="showTab('llm-management')">🧠 LLM Management</button>
            <button class="nav-tab" onclick="showTab('api-keys')">🔑 API Keys</button>
            <button class="nav-tab" onclick="showTab('logs')">📝 Logs</button>
            <button class="nav-tab" onclick="showTab('news')">📰 News</button>
            <button class="nav-tab" onclick="showTab('statistics')">📈 Statistics</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2>System Status Dashboard</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Active LLMs</h3>
                    <div class="metric" id="activeLlmCount">0</div>
                    <div class="label">Models operational</div>
                </div>
                <div class="dashboard-card">
                    <h3>Tests Today</h3>
                    <div class="metric" id="testsToday">0</div>
                    <div class="label">Bias tests completed</div>
                </div>
                <div class="dashboard-card">
                    <h3>Avg Response Time</h3>
                    <div class="metric" id="avgResponseTime">0ms</div>
                    <div class="label">All active models</div>
                </div>
                <div class="dashboard-card">
                    <h3>System Health</h3>
                    <div class="metric" id="systemHealth">98%</div>
                    <div class="label">Overall performance</div>
                </div>
            </div>
            
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <button class="btn btn-primary" onclick="runFullTestSuite()">🚀 Run Full Test Suite</button>
                <button class="btn btn-success" onclick="testAllConnections()">🔗 Test All Connections</button>
                <button class="btn btn-warning" onclick="exportLogs()">📥 Export Logs</button>
                <button class="btn btn-secondary" onclick="refreshDashboard()">🔄 Refresh Data</button>
            </div>

            <div id="testProgress" style="display: none;">
                <h4>Test Progress</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p id="progressText">Initializing...</p>
            </div>
        </div>

        <!-- LLM Management Tab -->
        <div id="llm-management" class="tab-content">
            <h2>LLM Management & Status</h2>
            <div class="llm-grid" id="llmGrid">
                <!-- LLM cards populated by JS -->
            </div>
        </div>

        <!-- API Keys Tab -->
        <div id="api-keys" class="tab-content">
            <h2>API Key Management</h2>
            <div class="actions-bar">
                <button class="btn btn-primary" onclick="showAddKeyModal()">➕ Add API Key</button>
                <button class="btn btn-success" onclick="testAllKeys()">🧪 Test All Keys</button>
                <button class="btn btn-warning" onclick="refreshModels()">🔄 Refresh Models</button>
            </div>
            <div class="responsive-table">
                <table class="api-keys-table">
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Status</th>
                            <th>Key Status</th>
                            <th>Available Models</th>
                            <th>Last Tested</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="apiKeysTableBody">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Logs Tab -->
        <div id="logs" class="tab-content">
            <h2>System Logs & Issues</h2>
            <div class="actions-bar">
                <button class="btn btn-primary" onclick="refreshLogs()">🔄 Refresh Logs</button>
                <button class="btn btn-warning" onclick="clearLogs()">🗑️ Clear Logs</button>
                <button class="btn btn-secondary" onclick="translateErrors()">🌐 Translate Errors</button>
            </div>
            <div class="log-container" id="logContainer">
                <!-- Logs populated by JS -->
            </div>
        </div>

        <!-- News Tab -->
        <div id="news" class="tab-content">
            <h2>News Management</h2>
            <div class="actions-bar">
                <button class="btn btn-primary" onclick="showNewsEditor()">✏️ Create News Article</button>
                <button class="btn btn-success" onclick="publishNews()">📢 Publish Selected</button>
                <button class="btn btn-secondary" onclick="refreshNews()">🔄 Refresh News</button>
            </div>
            
            <div class="news-editor" id="newsEditor" style="display: none;">
                <h3>Create News Article</h3>
                <div class="form-group">
                    <label for="newsTitle">Title</label>
                    <input type="text" id="newsTitle" class="form-control" placeholder="Enter article title">
                </div>
                <div class="form-group">
                    <label for="newsExcerpt">Excerpt (160 characters max)</label>
                    <textarea id="newsExcerpt" class="form-control" rows="2" maxlength="160" placeholder="Brief description..."></textarea>
                    <small id="excerptCount">0/160 characters</small>
                </div>
                <div class="form-group">
                    <label for="newsContent">Article Content (HTML)</label>
                    <textarea id="newsContent" class="form-control" rows="8" placeholder="Enter HTML content..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-success" onclick="saveNews()">💾 Save Article</button>
                    <button class="btn btn-secondary" onclick="hideNewsEditor()">❌ Cancel</button>
                </div>
            </div>

            <div class="news-list" id="newsList">
                <!-- News articles populated by JS -->
            </div>
        </div>

        <!-- Statistics Tab -->
        <div id="statistics" class="tab-content">
            <h2>System Statistics</h2>
            
            <div class="stats-section">
                <h3>Visitor Analytics</h3>
                <div class="stats-grid">
                    <div class="dashboard-card">
                        <h4>Total Visitors</h4>
                        <div class="metric" id="totalVisitors">0</div>
                        <div class="label">Unique visitors</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>API Calls</h4>
                        <div class="metric" id="totalApiCalls">0</div>
                        <div class="label">Total requests</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>Top Referrer</h4>
                        <div class="metric" id="topReferrer" style="font-size: 1.2rem;">-</div>
                        <div class="label">Traffic source</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>Tests Completed</h4>
                        <div class="metric" id="totalTests">0</div>
                        <div class="label">All-time bias tests</div>
                    </div>
                </div>
            </div>

            <div class="stats-section">
                <h3>Program Statistics</h3>
                <div class="stats-grid">
                    <div class="dashboard-card">
                        <h4>Database Size</h4>
                        <div class="metric" id="dbSize">0 MB</div>
                        <div class="label">Total storage</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>Uptime</h4>
                        <div class="metric" id="systemUptime">0h</div>
                        <div class="label">Operational time</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>Error Rate</h4>
                        <div class="metric" id="errorRate">0%</div>
                        <div class="label">Failed requests</div>
                    </div>
                    <div class="dashboard-card">
                        <h4>Active Sessions</h4>
                        <div class="metric" id="activeSessions">0</div>
                        <div class="label">Current users</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="addKeyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addKeyModal')">&times;</span>
            <h2>Add API Key</h2>
            <div class="form-group">
                <label for="keyProvider">Provider</label>
                <select id="keyProvider" class="form-control">
                    <option value="OpenAI">OpenAI</option>
                    <option value="Anthropic">Anthropic</option>
                    <option value="Google">Google</option>
                    <option value="xAI">xAI (Grok)</option>
                    <option value="Mistral">Mistral</option>
                    <option value="DeepSeek">DeepSeek</option>
                </select>
            </div>
            <div class="form-group">
                <label for="keyValue">API Key</label>
                <input type="password" id="keyValue" class="form-control" placeholder="Enter API key">
            </div>
            <div class="form-group">
                <label for="keyName">Key Name (Optional)</label>
                <input type="text" id="keyName" class="form-control" placeholder="Friendly name for this key">
            </div>
            <div class="form-actions">
                <button class="btn btn-success" onclick="saveApiKey()">💾 Save Key</button>
                <button class="btn btn-secondary" onclick="closeModal('addKeyModal')">❌ Cancel</button>
            </div>
        </div>
    </div>

    <div id="editKeyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editKeyModal')">&times;</span>
            <h2>Edit API Key</h2>
            <div id="editKeyContent">
                <!-- Content populated by JS -->
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
